/**
 * Dokuwiki Namespaced template
 *
 * @link    https://www.dokuwiki.org/template:namespaced
 * @author  Simon DELAGE <sdelage@gmail.com>
 * @license GPL 3 (https://www.gnu.org/licenses/gpl-3.0.html)
 *
 * This file provides main style rules
*/

/**
* Pagetools constants
* Move tpl_indexerWebBug() out of the way
* MICRO-RESET
* HTML ITEMS
* GENERIC CLASSES
* FLEXBOX
* SECTION HIGHLIGHTING
* NAVBAR
* SKIP
* HEADER
* MAIN
* FOOTER
* WIDGETS
* DOKUWIKI MODES
* -- Admin page
* -- Settings
* PLUGINS
* -- Cloud
* -- Sitemapnavi
* RESPONSIVENESS
*/

/* Pagetools constants */

    @ico-width: 30px;
    @ico-margin: 10px;

/* Move tpl_indexerWebBug() out of the way */

#namespaced__housekeeper {
    position: fixed;
    top: 0;
}

/* MICRO-RESET
-------------------------------------------------------------- */

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    border: 0;
    margin: 0;
    outline: 0;
    padding: 0;
    vertical-align: baseline;
}

html {
    overflow-y: scroll;
    /* Keeps page centred in all browsers regardless of content height */
    -webkit-text-size-adjust: 100%;
    /* Prevents iOS text size adjust after orientation change, without disabling user zoom */
    -ms-text-size-adjust: 100%;
    /* www.456bereastreet.com/archive/201012/controlling_text_size_in_safari_for_ios_without_disabling_user_zoom/ */
    font-size: .625em; /* fallback IE8+ */
    font-size: calc(1em * .625); /* IE9-IE11 math fixing. See http://bit.ly/1g4X0bX */
    /* set 1rem (base font-size) to be equivalent to 10p */
    scroll-behavior: smooth;
    /* a11y friendly smooth scrolling, see ACCESSIBILITY */
}

body {
    font-size: 1.6em;
}

* {
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

/* HTML ITEMS
-------------------------------------------------------------- */

a {
    text-decoration: none;
}

hr {
    width: 95%;
}

hr.vertical {
    margin: auto 1.5rem auto 0;
    width: unset;
    height: 95%;
    /*border-left-width: 1px;*/
    border-left-style: solid;
}

input:focus {
    background-color: @ini_highlight;
}

pre {
    overflow: auto;
    padding: 1rem;
    border-width: 1px;
    border-style: solid;
}

svg {
    fill: @ini_text;
}

svg:hover {
    fill: @ini_text_neu;
}

ul, ol {
    list-style-position: outside;
    margin-left: 1em;
}

ul.nostyle {
    list-style: none;
    margin: 0;
}

ul.inline li {
    display: inline;
    margin: 0 .5rem;
}

ul.inline li:first-child {
    margin: 0 .5rem 0 0;
}

ul.inline li:last-child {
    margin: 0 0 0 .5rem;
}

ul.inline li:first-child:last-child {
    margin: 0;
}

/* GENERIC CLASSES
-------------------------------------------------------------- */

.start {
    text-align: start;
}

.center {
    text-align: center;
}

.end {
    text-align: end;
}

aside.widget {
    margin-bottom: 1.5rem;
}

.pad {
    padding: 0 @ico-margin + @ico-width + @ico-margin;
    /* Main uses it's own gutters instead */
}

/* -- Debug -- */

.dbg,
.include-hook-sample {
    background-color: gold;
    color: #000;
}

/* FLEXBOX
-------------------------------------------------------------- */

.flex {
    display: flex;
    flex-flow: row wrap;
    justify-content: space-between;
    align-items: center;
    align-content: stretch;
}

.flex.row {
    flex-direction: row;
}
.flex.row-reverse {
    flex-direction: row-reverse;
}
.flex.column {
    flex-direction: column;
}

.flex.nowrap {
    flex-wrap: nowrap;
}

.flex.justify-evenly {
    justify-content: space-evenly;
}
.flex.justify-start {
    justify-content: start;
}
.flex.justify-center {
    justify-content: center;
}
.flex.justify-end {
    justify-content: end;
}

.flex.align-stretch {
    align-items: stretch;
}
.flex.align-start {
    align-items: flex-start;
}
.flex.align-center {
    align-items: center;
}
.flex.align-end {
    align-items: flex-end;
}

.flex .grow1 {
    flex-grow: 1;
}
.flex .grow2 {
    flex-grow: 2;
}
.flex .grow4 {
    flex-grow: 4;
}

/* SECTION HIGHLIGHTING
----------------------------------------------- */

div.secedit.editbutton_section {
    display: block;
    margin-top: -1.6rem;
    float: right;
}

div.secedit.editbutton_section button {
    padding: .1rem .9rem;
}

.dokuwiki div.section_highlight {
    margin: 0 -1.3rem; /* negative side margin = side padding + side border */
    padding: 0 .5rem;
    border-width: 0 .8rem;
    border-style: solid;
}

/* NAVBAR
----------------------------------------------- */

.navbar > div > ul {
    display: flex;
}

.navbar ul li.focus > ul {
    display: block;
}

.navbar ul li ul,
.navbar ul li:hover ul ul,
.navbar ul ul li:hover ul ul,
.navbar ul ul ul li:hover ul ul,
.navbar ul ul ul ul li:hover ul ul,
.navbar ul li.focus ul ul,
.navbar ul ul li.focus ul ul,
.navbar ul ul ul li.focus ul ul,
.navbar ul ul ul ul li.focus ul ul {
    left: -99999px;
    z-index: 100;
}

.navbar ul li:hover ul,
.navbar ul ul li:hover ul,
.navbar ul ul ul li:hover ul,
.navbar ul ul ul ul li:hover ul,
.navbar ul ul ul ul ul li:hover ul,
.navbar ul li.focus ul,
.navbar ul ul li.focus ul,
.navbar ul ul ul li.focus ul,
.navbar ul ul ul ul li.focus ul,
.navbar ul ul ul ul ul li.focus ul {
    left: 100%;
}

/* making sure focus isn't lost when passing from main to sub menu */
/*
#colormag__usertools-menu .sub-menu,
#colormag__usertools-dropdown .sub-menu {
    right: 0;
}
*/

.navbar .action .sub-menu {
    right: 0;
    top: auto;
    background-color: @ini_background;
}

.navbar ul li {
    /*display: inline-block;*/
}

.navbar ul li ul li {
    float: none;
}

.navbar ul li ul {
    position: absolute;
    width: 200px;
    top: 44px;
}

.navbar ul.sub-menu {
    width: 400px;
}

.navbar ul li ul li a {
    border-top: none;
}

.navbar ul li ul li a,
.navbar ul li.current-menu-item ul li a,
.navbar ul li ul li.current-menu-item a,
.navbar ul li.current_page_ancestor ul li a,
.navbar ul li.current-menu-ancestor ul li a,
.navbar ul li.current_page_item ul li a {
    float: none;
    font-size: 14px;
    height: 100%;
    padding: 10px 15px;
    display: block;
    text-align: left;
    text-transform: none;
}

.navbar ul li ul li ul {
    left: 200px;
    top: 0;
}

.navbar ul li:hover > ul,
.navbar ul li.focus > ul {
    left: auto;
}

.navbar ul ul {
    position: absolute;
    float: left;
    left: -99999px;
}

.navbar ul ul li:hover > ul,
.navbar ul ul li.focus > ul {
    left: 100%;
}

.navbar ul ul ul {
    left: -99999px;
    top: 0;
}

.navbar ul ul ul li:hover > ul,
.navbar ul ul ul li.focus > ul {
    left: 100%;
}

.navbar select {
    display: none;
}

#namespaced__site_nav.navbar ul li a {
    display: flex;
    align-items: center;
    padding: 1rem;
    max-height: 50px;
}

#namespaced__site_nav.navbar ul li a svg {
    width: 30px;
    height: 30px;
}

#namespaced__site_nav.navbar ul li span {
    padding: 6px 0;
}

#namespaced__site_nav.navbar ul li.dropdown-header {
    text-align: center;
}

#namespaced__usertools > ul {
    /*display: flex;*/
}

#namespaced__usertools > ul li.search {
    align-self: center;
    padding: 0 10px;
}

#namespaced__site_nav.navbar ul.sub-menu li a {
    justify-content: flex-end;
}

#namespaced__site_nav.navbar ul.sub-menu li a svg {
    margin-left: 5px;
    fill: @ini_text;
}

#namespaced__site_nav.navbar ul.sub-menu li a:hover svg {
    fill: #fff;
}

#namespaced__site_nav.navbar ul.sub-menu li a.active {
    pointer-events : none;
}

/* SKIP
-------------------------------------------------------------- */

.skip {
    width: 100% !important;
    font-size: 3rem;
    display: block;
    padding: 1rem 0;
    text-transform: uppercase;
    background-color: #000;
    color: #fff;
}

a.skip:focus,
a.skip:active {
   position: initial !important;
   height: initial !important;
   left: 0;
}

/* HEADER
-------------------------------------------------------------- */

#namespaced__site_logo {
    margin-right: 2rem;
}

#namespaced__site_description,
#namespaced__widebanner_wrap img {
    width: 100%;
}

#namespaced__sitetools .mobiletools {
    display: none;
}

#namespaced__widebanner_wrap img {
    height: auto;
}

/* MAIN
-------------------------------------------------------------- */

main aside.gutter {
    min-width: @ico-margin + @ico-width + @ico-margin;
    max-width: @ico-margin + @ico-width + @ico-margin;
}

#namespaced__main_subflex {
    margin-left: @ico-margin + @ico-width + @ico-margin;
}

#namespaced__main_subflex,
article {
    width: 100%;
    overflow: auto;
}

#namespaced__aside {
    min-width: @ini_sidebar_width;
    max-width: @ini_sidebar_width;
    width: @ini_sidebar_width;
    margin-right: 1.5rem;
}

body.no-sidepanel #namespaced__aside,
body.no-sidepanel #namespaced__main_subflex hr {
    display: none;
}

#dw__toc {
    min-width: @ini_toc_width;
    max-width: @ini_toc_width;
    width: @ini_toc_width;
    float: right;
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
}

body.sidepanel-flip #namespaced__content {
    order: 1;
}

body.sidepanel-flip #namespaced__main_subflex hr.vertical {
    order: 2;
    margin: auto 0 auto 1.5rem;
}

body.sidepanel-flip #namespaced__aside {
    order: 3;
    margin-left: 1.5rem;
    margin-right: 0;
}

/* =PAGETOOLS
-------------------------------------------------------------- */

#namespaced__pagetools .tools {
    position: sticky;
    top: 2rem;
    width: (@ico-width + @ico-margin + @ico-margin);
    /*min-height: (7 * (@ico-width + @ico-margin + @ico-margin));*/ /* 30 (= height of icons) + 10 (<a> padding) x 7 (= maximum number of possible tools of 6 + a11y title) */
    height: auto;
}

#namespaced__pagetools ul {
    position: absolute;
    right: 0;
    border: 1px solid transparent; /* add transparent border to prevent jumping when proper border is added on focus */
    white-space: nowrap;
    margin: 0;
}

#namespaced__pagetools ul li a {
    /*text-align: end;*/
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    padding: @ico-margin 0;
}

#namespaced__pagetools ul li a span {
    display: none; /* hide label until hover */
}

#namespaced__pagetools ul li h6 {
    visibility: hidden;
}

#namespaced__pagetools ul li a span {
    margin: 0 @ico-margin;
}

#namespaced__pagetools ul li h6 {
    margin: 0;
}

#namespaced__pagetools ul li h6 span {
    width: 100%;
}

#namespaced__pagetools ul li a svg {
    width: @ico-width;
    height: @ico-width;
    margin: 0 @ico-margin;
    display: inline-block;
    vertical-align: middle;
}

#namespaced__pagetools ul:hover {
    border: 1px solid @ini_border;
}

#namespaced__pagetools ul:hover li a span,
#namespaced__pagetools ul:hover li button span,
#namespaced__pagetools ul:hover li p span {
    display: initial;
}

#namespaced__pagetools ul:hover li h6 {
    visibility: visible;
}

html.js #namespaced__pagetools ul li.top {
    display: none;
}

/*
html.not-js #namespaced__pagetools ul li.bottom {
    display: none;
}
*/

body.pagetools-flip #namespaced__main_subflex {
    order: 2;
    margin-left: 0;
    margin-right: @ico-margin + @ico-width + @ico-margin;
}

body.pagetools-flip #namespaced__pagetools {
    order: 1;
}

body.pagetools-flip #namespaced__pagetools ul {
    left: 0;
    right: auto;
}

body.pagetools-flip #namespaced__pagetools ul li a {
    flex-direction: row-reverse;
}

/* FOOTER
----------------------------------------------- */

#namespaced__footer_widgets aside.widget {
    max-width: 25%;
}

/* WIDGETS
----------------------------------------------- */

#namespaced__widget_license img,
#namespaced__widget_license a {
    display: block;
}

#namespaced__widget_license img {
    margin: 0 0 .5rem 0;
}

#namespaced__widget_search form {
    text-align: center;
}

#qsearch__out strong,
#qsearch__out ul {
    display: block !important;
}

#qsearch__out ul {
    position: unset !important;
}

#qsearch__out ul li {
    display: list-item !important;
}

/* DOKUWIKI MODES
----------------------------------------------- */

/* -- Admin page  -- */

.dokuwiki div.ui-admin ul li a span.icon svg {
    width: 24px;
    height: 24px;
}

/* -- Settings  -- */

.dokuwiki #config__manager fieldset {
    background-color: @ini_background;
    border: 1px solid @ini_border;
}

.dokuwiki #config__manager fieldset legend {
    padding: 0 2rem;
}

.dokuwiki #config__manager fieldset table {
    margin: 1.5rem 0 .5rem 0;
}

.dokuwiki #config__manager fieldset table tr:nth-child(odd) {
    background-color: @ini_border;
}

.dokuwiki #config__manager fieldset td {
    padding: 1.4rem 1.6rem 1rem 1.6rem;
}

.dokuwiki #config__manager fieldset td span.outkey {
    margin-top: -1rem;
    background-color: inherit;
}

.dokuwiki #config__manager fieldset tr td.value div,
.dokuwiki #config__manager fieldset tr td.value input,
.dokuwiki #config__manager fieldset tr td.value select {
    background-color: @ini_highlight;
}

.dokuwiki #config__manager fieldset tr.default td.value div,
.dokuwiki #config__manager fieldset tr.default td.value input,
.dokuwiki #config__manager fieldset tr.default td.value select {
    background-color: @ini_background_neu;
    color: @ini_text_neu;
}

.dokuwiki #config__manager fieldset td.value div.selection {
    width: 49%;
}

.dokuwiki #config__manager fieldset td.value div.selection:nth-child(odd) {
    margin: 0 1% 0 0;
}

.dokuwiki #config__manager fieldset td.value div.selection:nth-child(even) {
    margin: 0 0 0 1%;
}

.dokuwiki #config__manager fieldset tr.default td.value div.other {
    padding: 0;
    background-color: @ini_background;
}

.dokuwiki #config__manager fieldset input.edit,
.dokuwiki #config__manager fieldset select {
    width: 100%;
}

.dokuwiki #config__manager fieldset select {
    max-width: 100%;
}

.dokuwiki #config__manager fieldset input.checkbox {
    vertical-align: -1px;
}

/* PLUGINS
----------------------------------------------- */

/* -- Cloud  -- */

div.cloud {
    margin: 0;
}

/* -- Sitemapnavi  -- */

button.plugin__sitemapnavi__dir {
    cursor: zoom-in;
}

/* RESPONSIVENESS
-------------------------------------------------------------- */

@media screen and (max-width: @ini_site_width + 60px) {
    #namespaced__site {
        background-color: lightyellow;
    }
}

@media screen and (max-width: @ini_site_width) {
    #namespaced__site {
        background-color: bisque;
    }
}

@media screen and (max-width: @ini_site_width - ((@ini_site_width - @ini_tablet_width) / 2)) {
}

@media screen and (max-width: @ini_tablet_width) {
    #namespaced__site {
        background-color: burlywood;
    }
    #namespaced__site_branding {
        justify-content: space-between;
    }
    #namespaced__header_tools {
        align-items: center;
    }
}

@media screen and (max-width: @ini_tablet_width - ((@ini_tablet_width - @ini_phone_width) / 2)) {
    #namespaced__site {
        background-color: darkgoldenrod;
    }
}

@media screen and (max-width: @ini_phone_width) {
    #namespaced__site {
        background-color: chocolate;
    }
}

/* MORE ACCESSIBILITY
-------------------------------------------------------------- */

/* Remove smooth scroll if desired by visitor */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}
